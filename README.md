# NTT Hardware Accelerator
This repository contains software models (Python) and hardware models (Verilog) of an NTT hardware accelerator. The novelties presented by the designs in this repository are:
1. The use of $Q=2^{16}+1$ as a coefficient modulus which simplifies modular reduction and "hardwired" multiplications
2. A unified point-based NTT/INTT architecture which implements N-point paralel Radix-2 NTT and INTT

## Getting Started
Before getting started, make sure:
1. You have installed Python 3
2. You have installed Icarus Verilog
3. You have installed GTK Wave
4. You have a bash terminal

To test a model, you can then run `./test <model_name>` or `./sim <model_name>` if you want to see the waveforms generated by the test. You can also run `./synth <model_name` to check for synthesizeability and generate a `sizer.txt` file which contains information on resource usage of the model.

## Project Structure
The structure of this project is as shown on the tree below
```
├── README.md
├── designs
│   ├── module.v
│   ├── other_module.v
│   └── some_other_module.v
├── scripts
│   ├── script.py
│   ├── other_script.py
│   └── some_other_script.py
├── simulations
│   ├── module
│   │   ├── module_tb.vvp
│   │   └── sizer.txt
│   ├── other_module
│   │   ├── other_module_tb.vvp
│   │   └── sizer.txt
│   └── some_other_module
│       ├── some_other_module_tb.vvp
│       └── sizer.txt
└── tests
    ├── module
    │   ├── gen.py
    │   ├── testcase.txt
    │   ├── actual.txt
    │   ├── expected.txt
    │   ├── module_tb.v
    │   └── top.v
    ├── other_module
    │   ├── gen.py
    │   ├── testcase.txt
    │   ├── actual.txt
    │   ├── expected.txt
    │   ├── other_module_tb.v
    │   └── top.v
    └── some_other_module
        ├── gen.py
        ├── testcase.txt
        ├── actual.txt
        ├── expected.txt
        ├── some_other_module_tb.v
        └── top.v
```

Note that:
1. Software models are located on the `scripts` folder
2. Hardware models are located on the `designs` folder
3. Hardware simulations results are located on the `simulations` folder
3. Testbenches for each hardware models are located in folders in the `tests` folder with the same name as the model being tested
4. Test folders must contain:
    1. A `top.v` file to fix design parameters for the synthesizeability and resource usage check
    2. A `<module_name>_tb.v` file as an entrypoint for the testbench
    3. An `testcase.txt`, `actual.txt`, and `expected.txt` generated by the `gen.py` file for the testbench

## Notable Files
A few notable top level modules in this repo are:
1. `ntt_flat.v`, models the unified point-based NTT/INTT architecture
2. `radix_2_dit_ntt.v`, models the optimized Radix-2 NTT algorithm using $Q=2^{16}+1$
3. `radix_4_dit_ntt.v`, models the optimized Radix-4 NTT algorithm using $Q=2^{16}+1$
4. `radix_8_dit_ntt.v`, models the optimized Radix-8 NTT algorithm using $Q=2^{16}+1$
5. `radix_16_dit_ntt.v`, models the optimized Radix-16 NTT algorithm using $Q=2^{16}+1$
6. `modred_v2.v`, models the simplified modular reductor for $Q=2^{N}+1$

## Credis
* BFV implementation in Python : [https://github.com/acmert/bfv-python](https://github.com/acmert/bfv-python)